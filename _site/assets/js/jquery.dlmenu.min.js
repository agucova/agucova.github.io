!function($,window,undefined){"use strict";var Modernizr=window.Modernizr,$body=$("body");$.DLMenu=function(options,element){this.$el=$(element),this._init(options)},$.DLMenu.defaults={animationClasses:{in:"dl-animate-in-1",out:"dl-animate-out-1"}},$.DLMenu.prototype={_init:function(options){this.options=$.extend(!0,{},$.DLMenu.defaults,options),this._config();var animEndEventNames={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=animEndEventNames[Modernizr.prefixed("animation")]+".dlmenu",this.transEndEventName=transEndEventNames[Modernizr.prefixed("transition")]+".dlmenu",this.supportAnimations=Modernizr.cssanimations,this.supportTransitions=Modernizr.csstransitions,this._initEvents()},_config:function(){this.open=!1,this.$trigger=this.$el.children("button"),this.$menu=this.$el.children("ul.dl-menu"),this.$menuitems=this.$menu.find("li:not(.dl-back)"),this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var self=this;this.$trigger.on("click.dlmenu",function(){return self.open?self._closeMenu():(self._openMenu(),$body.off("click").on("click.dlmenu",function(){self._closeMenu()})),!1}),this.$menuitems.on("click.dlmenu",function(event){event.stopPropagation();var $item=$(this),$submenu=$item.children("ul.dl-submenu");if($submenu.length>0){var $flyin=$submenu.clone().insertAfter(self.$menu).addClass(self.options.animationClasses.in),onAnimationEndFn=function(){self.$menu.off(self.animEndEventName).removeClass(self.options.animationClasses.out).addClass("dl-subview"),$item.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview"),$flyin.remove()};return self.$menu.addClass(self.options.animationClasses.out),self.supportAnimations?self.$menu.on(self.animEndEventName,onAnimationEndFn):onAnimationEndFn.call(),!1}}),this.$back.on("click.dlmenu",function(event){var $this=$(this),$submenu=$this.parents("ul.dl-submenu:first"),$item=$submenu.parent(),$flyin=$submenu.clone().insertAfter(self.$menu).addClass(self.options.animationClasses.out),onAnimationEndFn=function(){self.$menu.off(self.animEndEventName).removeClass(self.options.animationClasses.in),$flyin.remove()};self.$menu.addClass(self.options.animationClasses.in),self.supportAnimations?self.$menu.on(self.animEndEventName,onAnimationEndFn):onAnimationEndFn.call(),$item.removeClass("dl-subviewopen");var $subview=$this.parents(".dl-subview:first");return $subview.is("li")&&$subview.addClass("dl-subviewopen"),$subview.removeClass("dl-subview"),!1})},_closeMenu:function(){var self=this,onTransitionEndFn=function(){self.$menu.off(self.transEndEventName),self._resetMenu()};this.$menu.removeClass("dl-menuopen"),this.$menu.addClass("dl-menu-toggle"),this.$trigger.removeClass("dl-active"),this.supportTransitions?this.$menu.on(this.transEndEventName,onTransitionEndFn):onTransitionEndFn.call(),this.open=!1},_openMenu:function(){this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){$(this).removeClass("dl-menu-toggle")}),this.$trigger.addClass("dl-active"),this.open=!0},_resetMenu:function(){this.$menu.removeClass("dl-subview"),this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var logError=function(message){window.console&&window.console.error(message)};$.fn.dlmenu=function(options){if("string"==typeof options){var args=Array.prototype.slice.call(arguments,1);this.each(function(){var instance=$.data(this,"dlmenu");return instance?$.isFunction(instance[options])&&"_"!==options.charAt(0)?void instance[options].apply(instance,args):void logError("no such method '"+options+"' for dlmenu instance"):void logError("cannot call methods on dlmenu prior to initialization; attempted to call method '"+options+"'")})}else this.each(function(){var instance=$.data(this,"dlmenu");instance?instance._init():instance=$.data(this,"dlmenu",new $.DLMenu(options,this))});return this}}(jQuery,window);